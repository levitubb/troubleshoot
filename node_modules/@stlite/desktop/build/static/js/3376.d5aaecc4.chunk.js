"use strict";(globalThis.webpackChunk_stlite_desktop=globalThis.webpackChunk_stlite_desktop||[]).push([[3376],{15310:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ye});var i=n(5057),o=n(66751),l=n(55783),r=n(27179),a=n(56846),s=n(62658),d=n(32291),u=n(34422);const c=class{constructor(e){this.editedCells=new Map,this.addedRows=[],this.deletedRows=[],this.numRows=0,this.numRows=e}toJson(e){const t=new Map;e.forEach((e=>{t.set(e.indexNumber,e)}));const n={edited_cells:{},added_rows:[],deleted_rows:[]};this.editedCells.forEach(((e,i,o)=>{e.forEach(((e,o,l)=>{const r=t.get(o);r&&(n.edited_cells[`${i}:${o}`]=r.getCellValue(e))}))})),this.addedRows.forEach((e=>{const i={};e.forEach(((e,n,o)=>{const l=t.get(n);if(l){const t=l.getCellValue(e);(0,u.bb)(t)&&(i[n]=t)}})),n.added_rows.push(i)})),n.deleted_rows=this.deletedRows;return JSON.stringify(n,((e,t)=>void 0===t?null:t))}fromJson(e,t){const n=JSON.parse(e),i=new Map;t.forEach((e=>{i.set(e.indexNumber,e)})),Object.keys(n.edited_cells).forEach((e=>{const[t,o]=e.split(":").map(Number),l=i.get(o);if(l){const i=l.getCell(n.edited_cells[e]);var r;if(i)0==this.editedCells.has(t)&&this.editedCells.set(t,new Map),null===(r=this.editedCells.get(t))||void 0===r||r.set(o,i)}})),n.added_rows.forEach((e=>{const n=new Map;t.forEach((e=>{n.set(e.indexNumber,e.getCell(void 0))})),Object.keys(e).forEach((t=>{const o=i.get(Number(t));if(o){const i=o.getCell(e[Number(t)]);i&&n.set(Number(t),i)}})),this.addedRows.push(n)})),this.deletedRows=n.deleted_rows}isAddedRow(e){return e>=this.numRows}getCell(e,t){if(this.isAddedRow(t))return this.addedRows[t-this.numRows].get(e);const n=this.editedCells.get(t);return void 0!==n?n.get(e):void 0}setCell(e,t,n){if(this.isAddedRow(t)){if(t-this.numRows>=this.addedRows.length)return;this.addedRows[t-this.numRows].set(e,n)}else{void 0===this.editedCells.get(t)&&this.editedCells.set(t,new Map);this.editedCells.get(t).set(e,n)}}addRow(e){this.addedRows.push(e)}deleteRows(e){e.sort(((e,t)=>t-e)).forEach((e=>{this.deleteRow(e)}))}deleteRow(e){(0,u.le)(e)||e<0||(this.isAddedRow(e)?this.addedRows.splice(e-this.numRows,1):(this.deletedRows.includes(e)||(this.deletedRows.push(e),this.deletedRows=this.deletedRows.sort(((e,t)=>e-t))),this.editedCells.delete(e)))}getOriginalRowIndex(e){let t=e;for(let n=0;n<this.deletedRows.length&&!(this.deletedRows[n]>t);n++)t+=1;return t}getNumRows(){return this.numRows+this.addedRows.length-this.deletedRows.length}};var h=n(59990),g=n(31476);const m=function(){const e=(0,g.u)();return{accentColor:e.colors.primary,accentFg:e.colors.white,accentLight:(0,h.DZ)(e.colors.primary,.9),borderColor:e.colors.fadedText05,horizontalBorderColor:e.colors.fadedText05,fontFamily:e.genericFonts.bodyFont,bgSearchResult:(0,h.DZ)(e.colors.primary,.9),bgIconHeader:e.colors.fadedText60,fgIconHeader:e.colors.white,bgHeader:e.colors.bgMix,bgHeaderHasFocus:e.colors.secondaryBg,bgHeaderHovered:e.colors.bgMix,textHeader:e.colors.fadedText60,textHeaderSelected:e.colors.white,textGroupHeader:e.colors.fadedText60,headerFontStyle:`${e.fontSizes.sm}`,baseFontStyle:e.fontSizes.sm,editorFontSize:e.fontSizes.sm,textDark:e.colors.bodyText,textMedium:(0,h.DZ)(e.colors.bodyText,.2),textLight:e.colors.fadedText40,textBubble:e.colors.fadedText60,bgCell:e.colors.bgColor,bgCellMedium:e.colors.bgColor,cellHorizontalPadding:8,cellVerticalPadding:3,bgBubble:e.colors.secondaryBg,bgBubbleSelected:e.colors.secondaryBg,linkColor:e.colors.linkText,drilldownBorder:e.colors.darkenedBgMix25,tableBorderRadius:e.radii.md}};var f=n(52801),b=n(89163),p=n(65873),w=n(61918),y=n.n(w);const C=["true","t","yes","y","on","1"],x=["false","f","no","n","off","0"];function v(e,t=""){return e=`\u26a0\ufe0f ${e}`,{kind:o.p6.Text,readonly:!0,allowOverlay:!0,data:e+(t?`\n\n${t}\n`:""),displayData:e,isError:!0}}function M(e){return e.hasOwnProperty("isError")&&e.isError}function R(e,t){const n=t?"faded":"normal";return{kind:o.p6.Text,data:"",displayData:"",allowOverlay:!0,readonly:e,style:n}}function E(e){return{id:e.id,title:e.title,hasMenu:!1,themeOverride:e.themeOverride,...e.isStretched&&{grow:e.isIndex?1:3},...e.width&&{width:e.width}}}function N(e,t){return(0,u.le)(e)?t||{}:(0,u.le)(t)?e||{}:(0,p.merge)(e,t)}function k(e){if((0,u.le)(e))return[];if("number"===typeof e||"boolean"===typeof e)return[e];if("string"===typeof e){if(""===e)return[];if(!e.trim().startsWith("[")||!e.trim().endsWith("]"))return e.split(",");try{return JSON.parse(e)}catch(t){return[e]}}try{const t=JSON.parse(JSON.stringify(e,((e,t)=>"bigint"===typeof t?Number(t):t)));return(0,p.isArray)(t)?t.map((e=>["string","number","boolean","null"].includes(typeof e)?e:T(e))):[T(t)]}catch(t){return[T(e)]}}function T(e){try{try{return(0,p.toString)(e)}catch(t){return JSON.stringify(e,((e,t)=>"bigint"===typeof t?Number(t):t))}}catch(t){return`[${typeof e}]`}}function S(e){if((0,u.le)(e))return null;if("boolean"===typeof e)return e;const t=T(e).toLowerCase().trim();return""===t?null:!!C.includes(t)||!x.includes(t)&&void 0}function O(e){if((0,u.le)(e))return null;if((0,p.isArray)(e))return NaN;if("string"===typeof e){if(0===e.trim().length)return null;try{const t=y().unformat(e.trim());if((0,u.bb)(t))return t}catch(t){}}else if(e instanceof Int32Array)return Number(e[0]);return Number(e)}function D(e,t=4,n=!1){return!Number.isNaN(e)&&Number.isFinite(e)?(0===t&&(e=Math.round(e)),y()(e).format(n?`0,0.${"0".repeat(t)}`:`0,0.[${"0".repeat(t)}]`)):""}function A(e){const t={kind:o.p6.Text,data:"",displayData:"",allowOverlay:!0,contentAlignment:e.contentAlignment,readonly:!0,style:e.isIndex?"faded":"normal"};return{...e,kind:"object",sortMode:"default",isEditable:!1,getCell(e){try{const n=(0,u.bb)(e)?T(e):null,i=(0,u.bb)(n)?n:"";return{...t,data:n,displayData:i,isMissingValue:(0,u.le)(e)}}catch(n){return v(T(e),`The value cannot be interpreted as a string. Error: ${n}`)}},getCellValue:e=>void 0===e.data?null:e.data}}A.isEditableType=!1;const H=A;function z(e){const t={kind:o.p6.Text,data:"",displayData:"",allowOverlay:!0,contentAlignment:e.contentAlignment,readonly:!e.isEditable,style:e.isIndex?"faded":"normal"};return{...e,kind:"text",sortMode:"default",getCell(e){try{const n=(0,u.bb)(e)?T(e):null,i=(0,u.bb)(n)?n:"";return{...t,isMissingValue:(0,u.le)(n),data:n,displayData:i}}catch(n){return v("Incompatible value",`The value cannot be interpreted as string. Error: ${n}`)}},getCellValue:e=>void 0===e.data?null:e.data}}z.isEditableType=!0;const I=z;function V(e){const t={kind:o.p6.Boolean,data:!1,allowOverlay:!1,contentAlign:e.contentAlignment,readonly:!e.isEditable,style:e.isIndex?"faded":"normal"};return{...e,kind:"boolean",sortMode:"default",getCell(e){let n=null;return n=S(e),void 0===n?v(T(e),"The value cannot be interpreted as boolean."):{...t,data:n}},getCellValue:e=>void 0===e.data?null:e.data}}V.isEditableType=!0;const $=V;function W(e){let t="string";const n=N({options:"bool"===b.fu.getTypeName(e.arrowType)?[!0,!1]:[]},e.columnTypeMetadata),i=new Set(n.options.map((e=>typeof e)));1===i.size&&(i.has("number")||i.has("bigint")?t="number":i.has("boolean")&&(t="boolean"));const l={kind:o.p6.Custom,allowOverlay:e.isEditable,copyData:"",contentAlign:e.contentAlignment,readonly:!e.isEditable,data:{kind:"dropdown-cell",allowedValues:["",...n.options.filter((e=>""!==e)).map((e=>T(e)))],value:"",readonly:!e.isEditable}};return{...e,kind:"categorical",sortMode:"default",getCell(e){let t="";return(0,u.bb)(e)&&(t=T(e)),l.data.allowedValues.includes(t)?{...l,isMissingValue:""===t,copyData:t,data:{...l.data,value:t}}:v(T(t),"The value is not part of the allowed options.")},getCellValue(e){var n,i,o,l,r,a,s;return void 0===(null===(n=e.data)||void 0===n?void 0:n.value)||""===(null===(i=e.data)||void 0===i?void 0:i.value)?null:"number"===t?null!==(l=O(null===(r=e.data)||void 0===r?void 0:r.value))&&void 0!==l?l:null:"boolean"===t?null!==(a=S(null===(s=e.data)||void 0===s?void 0:s.value))&&void 0!==a?a:null:null===(o=e.data)||void 0===o?void 0:o.value}}}W.isEditableType=!0;const L=W;function _(e){const t={kind:o.p6.Bubble,data:[],allowOverlay:!0,contentAlign:e.contentAlignment,style:e.isIndex?"faded":"normal"};return{...e,kind:"list",sortMode:"default",isEditable:!1,getCell:e=>({...t,data:k(e),isMissingValue:(0,u.le)(e)}),getCellValue:e=>void 0===e.data?null:e.data}}_.isEditableType=!1;const F=_;function B(e){const t=b.fu.getTypeName(e.arrowType),n=N({precision:t.startsWith("int")||"range"===t||t.startsWith("uint")?0:void 0,min:t.startsWith("uint")?0:void 0},e.columnTypeMetadata),i=(0,u.le)(n.min)||n.min<0,l=(0,u.bb)(n.precision)?n.precision:void 0,r={kind:o.p6.Number,data:void 0,displayData:"",readonly:!e.isEditable,allowOverlay:!0,contentAlign:e.contentAlignment||"right",style:e.isIndex?"faded":"normal",allowNegative:i,fixedDecimals:l};return{...e,kind:"number",sortMode:"smart",getCell(e){let t=O(e);if((0,u.bb)(t)){if(Number.isNaN(t))return v(T(e),"The value cannot be interpreted as a number.");(0,u.bb)(n.precision)&&(t=0===n.precision?Math.trunc(t):Math.trunc(t*10**n.precision)/10**n.precision),(0,u.bb)(n.min)&&(t=Math.max(t,n.min)),(0,u.bb)(n.max)&&(t=Math.min(t,n.max))}return{...r,data:t,displayData:(0,u.bb)(t)?D(t):"",isMissingValue:(0,u.le)(t)}},getCellValue:e=>void 0===e.data?null:e.data}}B.isEditableType=!0;const j=B,J=new Map(Object.entries({object:H,text:I,boolean:$,categorical:L,list:F,number:j}));function P(e,t,n){const i=new RegExp(`${e}[,\\s].*{(?:[^}]*[\\s;]{1})?${t}:\\s*([^;}]+)[;]?.*}`,"gm");n=n.replace(/{/g," {");const o=i.exec(n);if(o)return o[1].trim()}function Y(e){return e.replace(/(\r\n|\n|\r)/gm," ")}function Z(e,t){const n=e.types.index[t],i=e.indexNames[t];let o=!0;return"range"===b.fu.getTypeName(n)&&(o=!1),{id:`index-${t}`,isEditable:o,title:i,arrowType:n,isIndex:!0,isHidden:!1}}function U(e,t){const n=e.columns[0][t];let i,o=e.types.data[t];if((0,u.le)(o)&&(o={meta:null,numpy_type:"object",pandas_type:"object"}),"categorical"===b.fu.getTypeName(o)){const n=e.getCategoricalOptions(t);(0,u.bb)(n)&&(i={options:n})}return{id:`column-${n}-${t}`,isEditable:!0,title:n,arrowType:o,columnTypeMetadata:i,isIndex:!1,isHidden:!1}}function G(e,t,n){let i;if(i="object"===e.kind?e.getCell((0,u.bb)(t.content)?Y(b.fu.format(t.content,t.contentType,t.field)):null):e.getCell(t.content),M(i))return i;if(!e.isEditable){if((0,u.bb)(t.displayContent)){const e=Y(t.displayContent);(i.kind===o.p6.Text||i.kind===o.p6.Number)&&(i={...i,displayData:e})}n&&t.cssId&&(i=function(e,t,n){const i={},o=P(t,"color",n);o&&(i.textDark=o);const l=P(t,"background-color",n);return l&&(i.bgCell=l),"yellow"===l&&void 0===o&&(i.textDark="#31333F"),i?{...e,themeOverride:i}:e}(i,t.cssId,n))}return i}const X=function(e,t,n,o){return{getCellContent:i.useCallback((([i,l])=>{if(i>t.length-1)return v("Column index out of bounds.","This should never happen. Please report this bug.");if(l>n-1)return v("Row index out of bounds.","This should never happen. Please report this bug.");const r=t[i],a=r.indexNumber,s=o.current.getOriginalRowIndex(l);if(r.isEditable||o.current.isAddedRow(s)){const e=o.current.getCell(a,s);if(void 0!==e)return e}try{return G(r,e.getCell(s+1,a),e.cssStyles)}catch(d){return(0,f.H)(d),v("Error during cell creation.",`This should never happen. Please report this bug. \nError: ${d}`)}}),[t,n,e,o])}},K=35,q=52,Q=2*K+3,ee=400;const te=function(e,t,n,o,l){let r,a=function(e){return Math.max(e*K+1+2,Q)}(t+1+(e.editingMode===d.Eh.EditingMode.DYNAMIC?1:0)),s=Math.min(a,ee);e.height&&(s=Math.max(e.height,Q),a=Math.max(e.height,a)),o&&(s=Math.min(s,o),a=Math.min(a,o),e.height||(s=a));let c=n;e.useContainerWidth?r=n:e.width&&(r=Math.min(Math.max(e.width,q),n),c=Math.min(Math.max(e.width,c),n));const[h,g]=i.useState({width:r||"100%",height:s});return i.useLayoutEffect((()=>{e.useContainerWidth&&"100%"===h.width&&g({width:n,height:h.height})}),[n]),i.useLayoutEffect((()=>{g({width:h.width,height:s})}),[t]),i.useLayoutEffect((()=>{g({width:r||"100%",height:h.height})}),[r]),i.useLayoutEffect((()=>{g({width:h.width,height:s})}),[s]),i.useLayoutEffect((()=>{if(l){const t=e.useContainerWidth||(0,u.bb)(e.width)&&e.width>0;g({width:t?c:"100%",height:a})}else g({width:r||"100%",height:s})}),[l]),{rowHeight:K,minHeight:Q,maxHeight:a,minWidth:q,maxWidth:c,resizableSize:h,setResizableSize:g}};const ne=function(e,t,n,o,l,r,a){const s=i.useCallback((([t,i],r)=>{const s=e[t],d=s.indexNumber,u=n.current.getOriginalRowIndex(l(i)),c=o([t,i]),h=s.getCellValue(c),g=s.getCellValue(r);if(!M(c)&&g===h)return;const m=s.getCell(g);n.current.setCell(d,u,{...m,lastUpdated:performance.now()}),a()}),[e,n,l,o,a]),d=i.useCallback((()=>{if(t)return;const i=new Map;e.forEach((e=>{i.set(e.indexNumber,e.getCell(void 0))})),n.current.addRow(i),a(!1,!1)}),[e,n,t]),u=i.useCallback((i=>{var o;if(i.rows.length>0){if(t)return!0;const e=i.rows.toArray().map((e=>n.current.getOriginalRowIndex(l(e))));return n.current.deleteRows(e),a(!0),!1}if(null!==(o=i.current)&&void 0!==o&&o.range){const t=[],n=i.current.range;for(let i=n.y;i<n.y+n.height;i++)for(let o=n.x;o<n.x+n.width;o++){const n=e[o];n.isEditable&&(t.push({cell:[o,i]}),s([o,i],n.getCell(null)))}return t.length>0&&(a(),r(t)),!1}return!0}),[e,n,t,r,l,a]),c=i.useCallback(((i,s)=>{const[u,c]=i,h=[];for(let g=0;g<s.length;g++){const i=s[g];if(g+c>=n.current.getNumRows()){if(t)break;d()}for(let t=0;t<i.length;t++){const r=i[t],a=g+c,s=t+u;if(s>=e.length)break;const d=e[s];if(d.isEditable){const e=d.getCell(r);if(!M(e)){const t=d.indexNumber,i=n.current.getOriginalRowIndex(l(a)),r=d.getCellValue(o([s,a]));d.getCellValue(e)!==r&&(n.current.setCell(t,i,{...e,lastUpdated:performance.now()}),h.push({cell:[s,a]}))}}}h.length>0&&(a(),r(h))}return!1}),[e,n,t,l,o,d,a,r]);return{onCellEdited:s,onPaste:c,onRowAppended:d,onDelete:u}};const ie=function(e){const[t,n]=(0,i.useState)((()=>new Map)),o=i.useCallback(((e,i,o,l)=>{e.id&&n(new Map(t).set(e.id,l))}),[t]);return{columns:e.map((e=>e.id&&t.has(e.id)&&void 0!==t.get(e.id)?{...e,width:t.get(e.id),grow:0}:e)),onColumnResize:o}};var oe=n(33256);const le=function(e,t,n){const[o,l]=i.useState(),{getCellContent:r,getOriginalIndex:a}=(0,oe.fF)({columns:t.map((e=>E(e))),getCellContent:n,rows:e,sort:o}),s=function(e,t){return void 0===t?e:e.map((e=>e.id===t.column.id?{...e,title:"asc"===t.direction?`\u2191 ${e.title}`:`\u2193 ${e.title}`}:e))}(t,o),d=i.useCallback((e=>{let t="asc";const n=s[e];if(o&&o.column.id===n.id){if("asc"!==o.direction)return void l(void 0);t="desc"}l({column:E(n),direction:t,mode:n.sortMode})}),[o,s]);return{columns:s,sortColumn:d,getOriginalIndex:a,getCellContent:r}},re="index",ae="col:";function se(e,t){var n;if(!t)return e;let i;return t.has(e.title)?i=t.get(e.title):t.has(`${ae}${e.indexNumber}`)?i=t.get(`${ae}${e.indexNumber}`):e.isIndex&&t.has(re)&&(i=t.get(re)),i?(0,p.merge)({...e},{title:i.title,width:i.width,customType:null===(n=i.type)||void 0===n?void 0:n.toLowerCase().trim(),isEditable:i.editable,isHidden:i.hidden,columnTypeMetadata:i.metadata,contentAlignment:i.alignment}):e}function de(e){let t;return(0,u.bb)(e.customType)&&(J.has(e.customType)?t=J.get(e.customType):(0,f.KE)(`Unknown column type configured in column configuration: ${e.customType}`)),(0,u.le)(t)&&(t=function(e){let t=e?b.fu.getTypeName(e):null;return t?(t=t.toLowerCase().trim(),["unicode","empty"].includes(t)?I:["object","date","time","datetime","datetimetz","decimal","bytes"].includes(t)?H:["bool"].includes(t)?$:["int8","int16","int32","int64","uint8","uint16","uint32","uint64","float16","float32","float64","float96","float128","range"].includes(t)?j:"categorical"===t?L:t.startsWith("list")?F:H):H}(e.arrowType)),t}const ue=function(e,t,n){const i=function(e){if(!e.columns)return new Map;try{return new Map(Object.entries(JSON.parse(e.columns)))}catch(t){return(0,f.H)(t),new Map}}(e),o=e.useContainerWidth||(0,u.bb)(e.width)&&e.width>0,l=function(e){var t,n,i,o,l,r;const a=[],s=null!==(t=null===(n=e.types)||void 0===n||null===(i=n.index)||void 0===i?void 0:i.length)&&void 0!==t?t:0,d=null!==(o=null===(l=e.columns)||void 0===l||null===(r=l[0])||void 0===r?void 0:r.length)&&void 0!==o?o:0;if(0===s&&0===d)return a.push({id:"empty-index",title:"",indexNumber:0,isEditable:!1,isIndex:!0}),a;for(let u=0;u<s;u++){const t={...Z(e,u),indexNumber:u};a.push(t)}for(let u=0;u<d;u++){const t={...U(e,u),indexNumber:u+s};a.push(t)}return a}(t).map((t=>{let l={...t,...se(t,i),isStretched:o};const r=de(l);return(e.editingMode===d.Eh.EditingMode.READ_ONLY||n||!1===r.isEditableType)&&(l={...l,isEditable:!1}),r(l)})).filter((e=>!e.isHidden));return{columns:l.length>0?l:[H({id:"empty-index",title:"",indexNumber:0,isEditable:!1,isIndex:!0})]}};const ce=(0,n(45490).Z)("div",{target:"e17g77xh0"})((({theme:e})=>({position:"relative",display:"inline-block","& .glideDataEditor":{height:"100%",minWidth:"100%",borderRadius:e.radii.md},"& .dvn-scroller":{scrollbarWidth:"thin",overflowX:"overlay !important",overflowY:"overlay !important"}})),"");n(27235);var he=n(96266);const ge=50,me=1e3,fe=500,be=100,pe=15e4,we=e=>{const{cell:t,theme:n}=e;return!!function(e){return e.hasOwnProperty("isMissingValue")&&e.isMissingValue}(t)&&((0,o.uN)({...e,theme:{...n,textDark:n.textLight,textMedium:n.textLight},spriteManager:{},hyperWrapping:!1},"None",t.contentAlign),!0)};const ye=(0,s.Z)((function({element:e,data:t,width:n,height:s,disabled:h,widgetMgr:g,isFullScreen:f}){const b=i.useRef(null),p=i.useRef(null),w=(0,l.Bn)(),y=m(),[C,x]=i.useState(!0),[v,M]=i.useState({columns:o.EV.empty(),rows:o.EV.empty(),current:void 0}),N=i.useCallback((()=>{M({columns:o.EV.empty(),rows:o.EV.empty(),current:void 0})}),[]),k=i.useCallback((e=>{var t;null===(t=p.current)||void 0===t||t.updateCells(e)}),[]);(0,u.le)(e.editingMode)&&(e.editingMode=d.Eh.EditingMode.READ_ONLY);const{READ_ONLY:T,DYNAMIC:S}=d.Eh.EditingMode,O=t.dimensions,D=Math.max(0,O.rows-1),A=0===D&&!(e.editingMode===S&&O.dataColumns>0),H=D>pe,z=i.useRef(new c(D)),[I,V]=i.useState(z.current.getNumRows());i.useEffect((()=>{z.current=new c(D),V(z.current.getNumRows())}),[D]);const $=i.useCallback((()=>{z.current=new c(D),V(z.current.getNumRows())}),[D]),{columns:W}=ue(e,t,h);i.useEffect((()=>{if(e.editingMode!==T){const t=g.getStringValue(e);t&&(z.current.fromJson(t,W),V(z.current.getNumRows()))}}),[]);const{getCellContent:L}=X(t,W,I,z),{columns:_,sortColumn:F,getOriginalIndex:B,getCellContent:j}=le(D,W,L),J=i.useCallback(((t=!1,n=!0)=>{I!==z.current.getNumRows()&&V(z.current.getNumRows()),t&&N(),(0,u.Ds)(be,(()=>{const t=z.current.toJson(_);let i=g.getStringValue(e);void 0===i&&(i=new c(0).toJson([])),t!==i&&g.setStringValue(e,t,{fromUi:n})}))()}),[g,e,I]),{onCellEdited:P,onPaste:Y,onRowAppended:Z,onDelete:U}=ne(_,e.editingMode!==S,z,j,B,k,J),{columns:G,onColumnResize:K}=ie(_.map((e=>E(e)))),{rowHeight:q,minHeight:Q,maxHeight:ee,minWidth:oe,maxWidth:re,resizableSize:ae,setResizableSize:se}=te(e,I,n,s,f),de=i.useCallback((([e,t])=>({...R(!0,!1),displayData:"empty",contentAlign:"center",allowOverlay:!1,themeOverride:{textDark:y.textLight},span:[0,Math.max(_.length-1,0)]})),[_]);return i.useEffect((()=>{const t=new a.Kz;return t.manageFormClearListener(g,e.formId,$),()=>{t.disconnect()}}),[]),(0,he.jsx)(ce,{className:"stDataFrame",onBlur:()=>{C||N()},children:(0,he.jsx)(r.e,{"data-testid":"stDataFrameResizable",ref:b,defaultSize:ae,style:{border:`1px solid ${y.borderColor}`,borderRadius:`${y.tableBorderRadius}`},minHeight:Q,maxHeight:ee,minWidth:oe,maxWidth:re,size:ae,enable:{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!0,bottomLeft:!1,topLeft:!1},grid:[1,q],snapGap:q/3,onResizeStop:(e,t,n,i)=>{b.current&&se({width:b.current.size.width,height:ee-b.current.size.height===3?b.current.size.height+3:b.current.size.height})},children:(0,he.jsx)(o.Nd,{className:"glideDataEditor",ref:p,columns:G,rows:A?1:I,minColumnWidth:ge,maxColumnWidth:me,maxColumnAutoWidth:fe,rowHeight:q,headerHeight:q,getCellContent:A?de:j,onColumnResize:K,freezeColumns:A?0:_.filter((e=>e.isIndex)).length,smoothScrollX:!0,smoothScrollY:!0,verticalBorder:t=>!(t>=_.length&&(e.useContainerWidth||"100%"===ae.width)),getCellsForSelection:!0,rowMarkers:"none",rangeSelect:"rect",columnSelect:"none",rowSelect:"none",keybindings:{search:!0,downFill:!0},onHeaderClicked:A||H?void 0:F,gridSelection:v,onGridSelectionChange:M,drawCell:we,theme:y,onMouseMove:e=>{"out-of-bounds"===e.kind&&C?x(!1):"out-of-bounds"===e.kind||C||x(!0)},fixedShadowX:!0,fixedShadowY:!0,experimental:{scrollbarWidthOverride:1},customRenderers:w.customRenderers,onPaste:!1,...!A&&e.editingMode!==T&&!h&&{fillHandle:!0,onCellEdited:P,onPaste:Y,onDelete:U},...!A&&e.editingMode===S&&{trailingRowOptions:{sticky:!1,tint:!0},rowMarkerTheme:{bgCell:y.bgHeader,bgCellMedium:y.bgHeader},rowMarkers:"checkbox",rowSelectionMode:"auto",rowSelect:h?"none":"multi",onRowAppended:h?void 0:Z,onHeaderClicked:void 0}})})})}))}}]);